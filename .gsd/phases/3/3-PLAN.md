---
phase: 3
plan: 3
wave: 2
---

# Plan 3.3: AI-Powered Insights & Personalization

## Objective
Upgrade the financial health section and expense import to use real Gemini AI powered by user-specific data.

## Context
- src/features/expenses/pages/ImportExpenses.tsx
- src/features/dashboard/hooks/useEconomicHealth.ts
- src/services/ai.ts

## Tasks

<task type="auto">
  <name>Upgrade ImportExpenses</name>
  <files>src/features/expenses/pages/ImportExpenses.tsx</files>
  <action>
    Refactor the Gemini processing logic to use the `ai.ts` service.
    - Use the user's own API Key if available.
    - Display a helpful message if no key is configured (redirect to settings).
  </action>
  <verify>Try importing a file and confirm it uses the new service flow.</verify>
  <done>Expense scanning works with user-provided keys.</done>
</task>

<task type="auto">
  <name>Real AI Financial Advice</name>
  <files>src/features/dashboard/hooks/useEconomicHealth.ts</files>
  <action>
    Update the hook to include a Gemini analysis step.
    - Aggregate monthly data (total income, expenses, category counts).
    - Call Gemini with a prompt for "3 expert financial tips in Argentina".
    - Replace the static `insights` with the AI response.
    - Implement caching to avoid calling AI on every render (use a timestamp or simple state).
  </action>
  <verify>The Economic Health dashboard displays custom insights signed as 'AI'.</verify>
  <done>Financial advice is generated by Gemini, not hardcoded rules.</done>
</task>

## Success Criteria
- [ ] Scanned expenses use personalized AI configuration.
- [ ] Financial insights are dynamic and AI-generated.
