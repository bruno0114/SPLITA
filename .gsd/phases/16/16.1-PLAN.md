---
phase: 16
plan: 16.1
wave: 1
---

# Plan 16.1: Router Localization (Spanish Slugs)

## Goal
Refactor the application to use Spanish URL slugs for better SEO and user experience for the target audience.

## Proposed Changes

### Files to Modify
1. `src/types/index.ts` - Update `AppRoute` enum values.
2. `src/App.tsx` - Update standard `Route` paths and `getRouteTitle`.
3. `src/components/layout/BottomNav.tsx` - Ensure navigation actions use updated constants.
4. `src/components/layout/Sidebar.tsx` - Ensure sidebar links match new enum values.
5. `src/components/layout/Header.tsx` - Check for any route-dependent logic.

### New Route Mapping
- `/` -> `/` (Personal Finance - Dashboard) - *Keep home as /? Or move to /finanzas? Road map said /finanzas* -> Let's keep `/` as root but alias it or have `/finanzas` as the main view. Actually, usually `Home` is `PersonalFinance`. Let's clarify.
- User request: "Los slugs de las paginas deben estar en español".
- `/groups` -> `/grupos`
- `/health` -> `/salud`
- `/import` -> `/importar`
- `/categories` -> `/categorias`
- `/settings` -> `/configuracion`
- `/login` -> `/ingresar` ? Or `/login` is standard? Let's stick to Spanish: `/ingresar` or `/acceso`. User used `/login` in previous error report. Let's change it to `/ingresar` to be consistent, or ask. User said "Los slugs... deben estar en español". `/login` is English. `/ingresar` is Spanish.
- `/history-ai` -> `/historial-ia`

## Tasks

<task type="auto">
  <name>Refactor AppRoute Enum</name>
  <files>src/types/index.ts</files>
  <action>
    Update `AppRoute` enum string values to be the actual Spanish URL paths.
    - `DASHBOARD_PERSONAL`: '/'
    - `DASHBOARD_GROUPS`: '/grupos'
    - `DASHBOARD_HEALTH`: '/salud'
    - `GROUP_DETAILS`: '/grupos/:groupId' (Note: this might need handling for dynamic param, or keep base path) -> Actually, for navigation we usually pass dynamic IDs. Let's keep `GROUP_DETAILS = '/grupos/:groupId'` for the Route definition, but for navigation we construct it.
    - `IMPORT`: '/importar'
    - `CATEGORIES`: '/categorias'
    - `SETTINGS`: '/configuracion'
    - `AI_HISTORY`: '/historial-ia'
    - `LOGIN`: '/ingresar'
    - `ONBOARDING`: '/bienvenida'
  </action>
  <verify>Check `src/types/index.ts` content</verify>
  <done>Enum values match Spanish paths</done>
</task>

<task type="auto">
  <name>Update Router & Navigation Logic</name>
  <files>src/App.tsx</files>
  <action>
    1. Import `AppRoute`.
    2. Update `<Route path="..." />` to use `path={AppRoute.X}` where possible (or string literals matching the Enum).
    3. Refactor `getAppRoute(pathname)` to match against `AppRoute` values.
    4. Refactor `handleNavigate(route)`: 
       - Since `route` is now the path, most cases can simplify to `navigate(route)`.
       - Handle `GROUP_DETAILS` specifically to append IDs if needed (though the enum might have `:groupId`).
  </action>
  <verify>App compiles and runs without routing errors</verify>
  <done>Routes defined using AppRoute constants or matching strings</done>
</task>

<task type="auto">
  <name>Verify Component Links</name>
  <files>src/components/layout/BottomNav.tsx, src/components/layout/Sidebar.tsx</files>
  <action>
    Ensure they pass the correct `AppRoute` enum to `onNavigate`.
    Since `onNavigate` takes `AppRoute`, and we changed the values of `AppRoute`, no change might be needed in the components themselves if they just pass the enum member.
    Verify `handleNavigate` in `App.tsx` handles the new values correctly.
  </action>
  <verify>Clicking links navigates to new Spanish URLs</verify>
  <done>Navigation functional</done>
</task>

## Success Criteria
- [ ] Application uses Spanish URLs (`/grupos`, `/salud`, etc.)
- [ ] Navigation remains fluid and functional
- [ ] `AppRoute` enum serves as the single source of truth for paths
