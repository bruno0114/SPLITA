---
phase: 18
plan: 3
status: complete
---

# Summary 18.3: Join Flow Polish & Debug

## Completed Tasks

### Task 1: Refactor App Layout for Join Route ✓
- Updated `isAuthRoute` logic in `App.tsx` to include `/unirse/*` and `/join/*` as standalone routes
- These routes now render WITHOUT the dashboard shell (Sidebar, Header, BottomNav)
- Both authenticated and unauthenticated users see a clean, centered UI

### Task 2: Redesign JoinGroup UI ✓
- Added dynamic background ambience (matching Login/Onboarding aesthetic)
- Conditional UI based on auth state:
  - **Authenticated**: Shows "Unirme ahora" button
  - **Unauthenticated**: Shows "Iniciar sesión" and "Crear cuenta" buttons
- Improved error state to show context-appropriate actions
- "Volver a mis grupos" link only shows for authenticated users
- Uses `100dvh` for proper mobile viewport handling

### Task 3: Fix Redirect Flickering ✓
- Added `loading` state from `AuthContext` to `App.tsx`
- Added `redirectPending` state to track active redirects
- Shows branded splash screen during auth check and redirect processing
- Separated redirect handling and onboarding sync into distinct effects
- Redirect is now cleared before navigation to prevent loop

## Files Modified
- `src/App.tsx` — Layout routing and splash screen
- `src/features/groups/pages/JoinGroup.tsx` — Complete UI redesign

## Verification
- Build: ✓ Successful
- Commit: `3c79711`
