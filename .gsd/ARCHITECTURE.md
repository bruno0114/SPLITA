# Architecture

> Auto-generated by /map on 2026-01-19

## Overview

SPLITA is a financial management PWA designed to help users manage personal finances and split group expenses. It currently features a high-fidelity UI with mocked data and manual routing.

```mermaid
graph TD
    User[User] --> App[App.tsx]
    App --> Router[Manual Routing Logic]
    
    subgraph Pages
        Router --> Login
        Router --> Onboarding
        Router --> PersonalFinance[Personal Finance Dashboard]
        Router --> Groups[Groups Dashboard]
        Router --> GroupDetails
        Router --> ImportExpenses[Import AI]
        Router --> Settings
        Router --> EconomicHealth
    end
    
    subgraph Data
        Constants[constants.ts (MOCK_DATA)]
        State[App Local State]
    end
    
    Pages --> Constants
    App --> State
```

## Components

### Core Layout
- **App.tsx**: Main entry point, handles global state (theme, currency, routes) and layout.
- **components/Sidebar.tsx**: Desktop navigation.
- **components/BottomNav.tsx**: Mobile navigation.
- **components/Header.tsx**: Top bar with theme/currency toggles.

### Features
- **pages/PersonalFinance.tsx**: Dashboard for individual expenses.
- **pages/Groups.tsx**: List of expense groups.
- **pages/GroupDetails.tsx**: Detail view of a specific group.
- **pages/ImportExpenses.tsx**: AI-powered receipt scanning interface.
- **pages/EconomicHealth.tsx**: Financial scoring and insights.
- **pages/Onboarding.tsx**: Initial user setup flow.
- **pages/Login.tsx**: Authentication screen (currently visual only).

## Data Flow

Current data flow is unidirectional from constants/state to components.

1. **State Management**: React `useState` at root level (`App.tsx`) triggers re-renders.
2. **Data Source**: Static mock data imported from `constants.ts`.
3. **AI Integration**: `@google/genai` is used in `ImportExpenses.tsx` to process images, but results are not persisted.

## Integration Points

| Service | Type | Purpose | Status |
|---------|------|---------|--------|
| Google Gemini | SDK | Receipt image analysis | implemented (client-side only) |
| Supabase | Database | Data persistence | **PLANNED** |
| Supabase Auth | Auth | User authentication | **PLANNED** |

## Technical Debt

- [ ] **Manual Routing**: Using `useState` for routing instead of a proper router like `react-router-dom`.
- [ ] **Mock Data**: Heavy reliance on `constants.ts` for all data.
- [ ] **Props Drilling**: Navigation and global state are passed down through multiple levels of props.
- [ ] **No Persistence**: Data is lost on refresh.
- [ ] **Flat Architecture**: All components/pages at top level or shallow nesting.

## Conventions

**Naming:** PascalCase for components, camelCase for functions/vars.
**Structure:** Feature-based pages, shared components.
**Testing:** No testing infrastructure found.
