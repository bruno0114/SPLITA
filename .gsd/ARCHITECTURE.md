# Architecture

> Auto-generated by /map on 2026-01-20

## Overview

SPLITA is a Progressive Web Application (PWA) for expense splitting and personal finance management. It uses a client-side architecture with Supabase for backend services (Auth, Database, Storage) and Google Gemini for AI-powered receipt scanning.

```
┌─────────────────────────────────────────┐
│              [App Entry]                │
│            src/main.tsx                 │
├─────────────────────────────────────────┤
│          [Routing & Layout]             │
│   App.tsx / Sidebar / Header / Auth     │
├─────────────────────────────────────────┤
│          [Feature Modules]              │
│  Auth / Dashboard / Groups / Settings   │
│  Expenses / Analytics                   │
├─────────────────────────────────────────┤
│          [Data & Services]              │
│     Supabase Client / Gemini SDK        │
└─────────────────────────────────────────┘
```

## Structure

The project follows a **Feature-based Architecture**:

```
src/
├── components/       # Shared UI components (layout, ui kit)
├── context/          # Global state (AuthContext)
├── features/         # Domain-specific modules
│   ├── analytics/    # Spending analysis & reports
│   ├── auth/         # Login, Register, Profile
│   ├── dashboard/    # Personal finance overview
│   ├── expenses/     # Transaction management
│   ├── groups/       # Group splitting logic
│   └── settings/     # App configuration
├── hooks/            # Shared custom hooks
├── lib/              # Core utilities (Supabase, Constants)
├── services/         # External service integration
└── types/            # TypeScript definitions
```

## Components

### Auth Feature
- **Purpose:** Manages user authentication and profile synchronization.
- **Location:** `src/features/auth`
- **Key Files:** `useAuth.ts`, `AuthContext.tsx`, `Login.tsx`, `Onboarding.tsx`.
- **Dependencies:** Supabase Auth.

### Groups Feature
- **Purpose:** Handles group creation, membership, and expense splitting.
- **Location:** `src/features/groups`
- **Key Files:** `useGroups.ts`, `Groups.tsx`, `GroupDetails.tsx`.
- **Dependencies:** Supabase Database (`groups`, `group_members`).

### Analytics Feature
- **Purpose:** Visualizes spending data.
- **Location:** `src/features/analytics`
- **Key Files:** `useCategoryStats.ts`, `Categories.tsx`, `CategoryDetail.tsx`.
- **Dependencies:** `useTransactions`, `usePersonalTransactions`.

## Data Flow

1. **Authentication:**
   - User signs in via `AuthContext` -> Supabase Auth.
   - Session persists in local storage (handled by Supabase SDK).
   - Profile data fetched from `profiles` table.

2. **Data Fetching:**
   - Custom Hooks (`useGroups`, `useTransactions`) call `supabase.from(...).select(...)`.
   - Real-time subscriptions (not yet fully implemented global, but supported by hooks).
   - state management via local React state + optimisitic updates.

3. **AI Integration:**
   - Image upload -> processed by Google Gemini SDK -> returns structured JSON. (In-progress).

## Integration Points

| Service | Type | Purpose |
|---------|------|---------|
| **Supabase** | BaaS | Auth, Postgres DB, Storage (Images) |
| **Google Gemini** | SDK | Receipt/Invoice OCR & Analysis |
| **DolarAPI** | REST | Real-time exchange rates (USD/ARS) |

## Conventions

- **Styling:** Tailwind CSS with utility-first approach.
- **Icons:** Lucide React.
- **State:** React Context for global (Auth), Hooks for feature-level.
- **Routing:** React Router DOM v6.
